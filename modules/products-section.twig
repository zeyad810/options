<div section-id="{{ sectionId }}" data-lg-scroll-offset="130" data-md-scroll-offset="130" data-sm-scroll-offset="94" class="home-products-section section-padding-space">
  <div class="container">
    <div class="mb-4" style="margin-bottom: 55px;">
      {% include 'title.twig' with { 'component_title': settings.title } %}
    </div>
    <swiper-container 
      init="false"
      class="slider_part"
      >
      {% for product in settings.products.products %}
        <swiper-slide>
          <div class="prod-col">
            {% include 'product-card.twig' with {'product' : product, 'index': key} %}
          </div>
        </swiper-slide>
      {% endfor %}
    </swiper-container>

    {% if settings.more_text %}
      <div class="mt-5 text-center category-products-display-more-section">
        <a style="width: auto;" href="{{ settings.products.url }}" class="more-button btn btn-outline-primary theme-text-primary theme-border-primary">{{ settings.more_text }}</a>
      </div>
    {% endif %}
  </div>
</div>
<style>
.home-products-section{
  margin-top: 20px;
}



.slider_part::part(container){
    padding-top: 75px;
}
.slider_part::part(button-prev){
   top: 25px;
    left: 50px;
    right: unset;
}
.slider_part::part(button-next){
  top: 25px;
  left: 0;

}

	.slider_part swiper-slide .product-item .product-price{
		margin-bottom: 10px;
		width:fit-content;
	}
	.slider_part swiper-slide .product-item .dis-offer{
    display: flex !important; 
    align-items: center;

  }
	.slider_part swiper-slide .product-item .dis-offer span{
    font-size: 11px;
  }

.slider_part::part(button-prev),
.slider_part::part(button-next){
  color: var(--primary-color) !important;
    background-color: white  !important;
    padding: 10px !important;
    width: 25px !important;
    height: 25px !important;
    border: 1px solid gainsboro !important;
    border-radius: 8px !important;
}

@media (max-width: 768px) {
.slider_part::part(button-prev),
.slider_part::part(button-next){
    padding: 8px !important;
    width: 20px !important;
    height: 20px !important;
  }

}


</style>
<script>


// تحديد عناصر Swiper
const swiperEl = document.querySelector('.slider_part');
const prevButton = document.querySelector('#button-prev');
const nextButton = document.querySelector('#button-next');

// إعدادات Swiper
const swiperParams = {
  slidesPerView: 2,
  spaceBetween: 10,
  speed: 600,
  loop: false,
  navigation: true,
  cssMode: true,
  watchOverflow: true,
    breakpoints: {
    320: {
      slidesPerView: 2,
      spaceBetween: 10,
    },
    768: {
      slidesPerView: 2,
      spaceBetween: 20,
    },
    992: {
      slidesPerView: 4,
      spaceBetween: 30,
    },
  },
};

// دمج الإعدادات مع swiper-container
Object.assign(swiperEl, swiperParams);

// تهيئة Swiper
swiperEl.initialize();

// تحقق عند التهيئة
swiperEl.addEventListener('ready', () => {
  console.log('Swiper is ready!');
});

// أحداث إضافية للأزرار (اختياري)
prevButton.addEventListener('click', () => {
  swiperEl.swiper.slidePrev();
});

nextButton.addEventListener('click', () => {
  swiperEl.swiper.slideNext();
});

  {# const swiperEl = document.querySelector('swiper-container');
  const prevButton = document.querySelector('#button-prev');
  const nextButton = document.querySelector('#button-next');

  prevButton.addEventListener('click', () => {
    swiperEl.swiper.slidePrev(); 
  });

  nextButton.addEventListener('click', () => {
    swiperEl.swiper.slideNext(); 
  }); #}

    {# const arrowNextClass = (window.appDirection === 'ltr') ? 'icon-keyboard_arrow_right' : 'icon-keyboard_arrow_left';
    const arrowPrevClass = (window.appDirection === 'ltr') ? 'icon-keyboard_arrow_left' : 'icon-keyboard_arrow_right';

    const editingMode = {% if store.editing_mode %}true{% else %}false{% endif %};

    console.log("Swiper initialized. Editing mode:", editingMode); #}
  
</script>


{% schema %}
{
  "name": {
    "ar": "قائمة المنتجات",
    "en": "Products"
  },
  "icon": "fal fa-box",
  "display": true,
  "settings": {
    "title": {
      "type": "text",
      "label": {
        "ar": "العنوان",
        "en": "Title"
      }
    }, 
    "products": {
      "type": "products",
      "label": {
        "ar": "اختر قائمة المنتجات ",
        "en": "Select category products"
      }
    },
    "display_more": {
      "type": "checkbox",
      "label": {
        "ar": "",
        "en": ""
      },
      "noLabel": true,
      "option": {
        "ar": "عرض زر جميع منتجات التصنيف",
        "en": "Display button more products"
      }
    },
    "more_text": {
      "type": "text",
      "label": {
        "ar": "نص زر المزيد  ",
        "en": "More text"
      }
    }
  }
}
{% endschema %}
